# アセンブリ言語CASLの仕様
- CASLはCOMETのためのアセンブリ言語
- CASLの仕様：https://www.jitec.ipa.go.jp/1_13download/hani.pdf

# 命令の種類
- 疑似命令（4種類）
- マクロ命令（3種類）
- 機械語命令（23種類）

# CASLの命令形式
- ラベル欄・命令コード欄・オペランド欄・注釈欄を持つ

## ラベル欄
## 命令コード欄
## オペランド欄
## 注釈欄

## 疑似命令
以下の4種類の疑似命令が存在する

### START
```
# STARTのフォーマット
START｜[実行開始番地]
```

- プログラムの先頭の定義・実行開始番地の定義・他のプログラムと連結用の入り口名の定義
- プログラムの先頭を示すためプログラムの最初に必ず記載が必要
- 実行開始番地はこのプログラム内で定義されているラベル名
- ラベル名を省略した場合はプログラムの先頭から処理を開始 

### END
- プログラムの終わりの定義
- プログラムの終わりを示す
- プログラムの終わりには必ず記載が必要

### DC
- 定数の定義
- 定数で指定した定数データを格納する
- 定数は10進数・16進数・文字列定数・アドレス定数の4種類

### DS
- 領域の確保
- 指定した語数の領域を確保する
- 領域の指定は10進数もしくはラベル名を利用する

```
; 疑似命令のサンプル
N      DC      3	; 輪の総数
LNG    DC      11	; メッセージの長さ
A      DC      'A'
B      DC      'B'
C      DC      'C'
MSG    DC      'from '
MSG1   DS      1
       DC      ' to '
MSG2   DS      1
       END
```

## マクロ命令
- 入出力およびプログラムの終了を行う命令
- CASLでは機械語の入出力命令が定義されていないので、OS側で実行
- マクロ命令が現れるとCASLはOSを呼ぶための命令群を生成

### IN

### OUT

### EXIT
- プログラムの実行を終了する（処理をOSに戻す）


### 機械語命令
- COMETの命令の仕様を参照

## CASLの記述方法
- CASL は1行にラベル・命令コード・オペランドの順に記述する。

## ラベルの仕様
- ラベルは省略も可能。
- ラベルは3文字以内・先頭は英大文字・それ以外は英大文字または数字である。オペランドでアドレスを指定する際に数値の代わりにラベルを記述できる。

## 命令セットの仕様

## 疑似命令

## マクロ命令 
- IN 入力領域 入力文字長：この命令が実行されると入力待ちが発生する。データが入力されると入力されたデータを文字型として入力領域に入力する、入力は1文字を1ワードに格納する。COMETでは文字データはJIS X 0201（8ビット）のため、1文字1ワード（16ビット）では空きが発生することになるが、入力データは 8ビット目以降に入力され、0～7ビット目までには0が格納される。また入力長には入力したデータの長さが格納される。入力領域、入力長はともにラベル名で指定する。
- OUT 出力領域　出力文字長：出力領域に格納されているデータを出力文字長分、文字として表示する。IN 命令と同様 1ワード1文字に対応する。
- EXIT：プログラムの実行を終了する。
```
; マクロ命令OUTのサンプル
DISP   ST      GR1,MSG1    ; 'from X to Z'
       ST      GR3,MSG2
       OUT     MSG,LNG
       RET
```

## 機械語命令
